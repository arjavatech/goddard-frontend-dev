<!DOCTYPE html>
<html>

<head>
    <title>Parent details</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="image/gs_logo_tab.png" type="image/png">
    <link rel="stylesheet" href="css/navbar_signout.css">
    <link rel="stylesheet" href="css/admin_dashboard.css">
    <link rel="stylesheet" href="css/data_table.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.922.0.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="js/parent_details.js"></script>
    <script type="module" src="js/auth_verify.js"></script>
    <script type="module" src='js/add_child.js'></script>
    <style>
        /***DON'T REMOVE***/

        /*** Pagination ***/
        .dataTables_wrapper .dataTables_paginate .paginate_button.current,
        .dataTables_wrapper .dataTables_paginate .paginate_button.current {
            color: #fff !important;
            border: 1px solid #0F2D52;
            background-color: #0F2D52 !important;
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #0F2D52), color-stop(100%, #0F2D52)) !important;
            background: -webkit-linear-gradient(top, #0F2D52 0%, #0F2D52 100%) !important;
            background: -moz-linear-gradient(top, #0F2D52 0%, #0F2D52 100%) !important;
            background: -ms-linear-gradient(top, #0F2D52 0%, #0F2D52 100%) !important;
            background: -o-linear-gradient(top, #0F2D52 0%, #0F2D52 100%) !important;
            background: linear-gradient(to bottom, #0F2D52 0%, #0F2D52 100%) !important;
        }

        .dataTables_wrapper .dataTables_paginate .paginate_button.current,
        .dataTables_wrapper .dataTables_paginate .paginate_button.current:hover {
            color: #fff !important;
            border: 1px solid #0F2D52;
            background-color: #0F2D52 !important;
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #0F2D52), color-stop(100%, #0F2D52)) !important;
            background: -webkit-linear-gradient(top, #0F2D52 0%, #0F2D52 100%) !important;
            background: -moz-linear-gradient(top, #0F2D52 0%, #0F2D52 100%) !important;
            background: -ms-linear-gradient(top, #0F2D52 0%, #0F2D52 100%) !important;
            background: -o-linear-gradient(top, #0F2D52 0%, #0F2D52 100%) !important;
            background: linear-gradient(to bottom, #0F2D52 0%, #0F2D52 100%) !important;
        }

        .dataTables_wrapper .dataTables_paginate .paginate_button:hover {
            color: #fff !important;
            border: 1px solid #0F2D52;
            background-color: #0F2D52 !important;
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #0F2D52), color-stop(100%, #0F2D52)) !important;
            background: -webkit-linear-gradient(top, #0F2D52 0%, #0F2D52 100%) !important;
            background: -moz-linear-gradient(top, #0F2D52 0%, #0F2D52 100%) !important;
            background: -ms-linear-gradient(top, #0F2D52 0%, #0F2D52 100%) !important;
            background: -o-linear-gradient(top, #0F2D52 0%, #0F2D52 100%) !important;
            background: linear-gradient(to bottom, #0F2D52 0%, #0F2D52 100%) !important;
        }

        .dataTables_wrapper .dataTables_paginate .paginate_button {
            color: #0F2D52 !important;
            border: 1px solid #c5c5c5;
            background-color: #c5c5c5 !important;
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #c5c5c5), color-stop(100%, #c5c5c5)) !important;
            background: -webkit-linear-gradient(top, #c5c5c5 0%, #c5c5c5 100%) !important;
            background: -moz-linear-gradient(top, #c5c5c5 0%, #c5c5c5 100%) !important;
            background: -ms-linear-gradient(top, #c5c5c5 0%, #c5c5c5 100%) !important;
            background: -o-linear-gradient(top, #c5c5c5 0%, #c5c5c5 100%) !important;
            background: linear-gradient(to bottom, #c5c5c5 0%, #c5c5c5 100%) !important;
        }

        [type=search] {
            outline-offset: 0px !important;
        }

        .linkstatus {
            background-color: gray !important;
        }
        .dropdown-container {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .dropdown-container1 {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .parent-dropdown {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 100%;
            padding: 10px;
            border: 1px solid #0F2D52;
            border-radius: 4px;
            background-color: #fff;
            font-size: 16px;
            position: relative;
        }

        .parent-dropdown1 {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 100%;
            padding: 8px;
            border: 1px solid #0F2D52;
            border-radius: 4px;
            background-color: #fff;
            font-size: 16px;
            position: relative;
        }

        .dropdown-container::after {
            content: '';
            position: absolute;
            right: 10px;
            top: 50%;
            width: 0;
            height: 0;
            pointer-events: none;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 5px solid #000;
            transform: translateY(-50%);
        }

        .dropdown-container1::after {
            content: '';
            position: absolute;
            right: 20px;
            top: 50%;
            width: 0;
            height: 0;
            pointer-events: none;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 5px solid #000;
            transform: translateY(-50%);
        }

        /***DON'T REMOVE***/
    </style>
</head>

<body>
    <!-- Navigation Bar -->
    <nav class="navbar_bg">
        <!--Side Menu Bar-->
        <div class="row">
            <div class="col-2">
                <button class="btn btn-primary m-5" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#offcanvasWithBothOptions" aria-controls="offcanvasWithBothOptions"><svg
                        xmlns="http://www.w3.org/2000/svg" width="27" height="27" fill="currentColor" class="bi bi-list"
                        viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
                    </svg>
                </button>

                <div class="offcanvas offcanvas-start" data-bs-scroll="true" tabindex="-1" id="offcanvasWithBothOptions"
                    aria-labelledby="offcanvasWithBothOptionsLabel">
                    <div class="offcanvas-header p-3">
                        <h3 class="offcanvas-title" id="offcanvasWithBothOptionsLabel" style="color:#0F2D52">Admin Menu
                        </h3>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body">
                        <ul class="nav nav-pills flex-column mb-auto">
                            <li class="nav-item">
                                <a href="admin_dashboard.html" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg"
                                        width="40" height="40" fill="currentColor" class="bi bi-bar-chart-fill p-2"
                                        viewBox="0 0 16 16">
                                        <path
                                            d="M1 11a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3zm5-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V2z" />
                                    </svg>Dashboard</a>
                                <!-- <a href="invite_parent.html" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg"
                                        width="40" height="40" fill="currentColor" class="bi bi-plus-circle-fill p-2"
                                        viewBox="0 0 16 16">
                                        <path
                                            d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z" />
                                    </svg>Invite Parent</a> -->
                                <!-- <a href="add_child.html" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg"
                                        width="40" height="40" fill="currentColor" class="p-2" viewBox="0 0 576 512">
                                        <path
                                            d="M112 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm40 304V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V256.9L59.4 304.5c-9.1 15.1-28.8 20-43.9 10.9s-20-28.8-10.9-43.9l58.3-97c17.4-28.9 48.6-46.6 82.3-46.6h29.7c33.7 0 64.9 17.7 82.3 46.6l44.9 74.7c-16.1 17.6-28.6 38.5-36.6 61.5c-1.9-1.8-3.5-3.9-4.9-6.3L232 256.9V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V352H152zM432 224a144 144 0 1 1 0 288 144 144 0 1 1 0-288zm16 80c0-8.8-7.2-16-16-16s-16 7.2-16 16v48H368c-8.8 0-16 7.2-16 16s7.2 16 16 16h48v48c0 8.8 7.2 16 16 16s16-7.2 16-16V384h48c8.8 0 16-7.2 16-16s-7.2-16-16-16H448V304z" />
                                    </svg>Add Child</a> -->
                                <a href="application_status.html" class="nav-link"> <svg
                                        xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor"
                                        class="bi bi-file-text-fill p-2" viewBox="0 0 16 16">
                                        <path
                                            d="M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM5 4h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm-.5 2.5A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zM5 8h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z" />
                                    </svg>Application Status</a>
                                <a href="parent_details.html" class="nav-link active"><svg
                                        xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor"
                                        class="bi bi-people-fill p-2" viewBox="0 0 16 16">
                                        <path
                                            d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7Zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm-5.784 6A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216ZM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z" />
                                    </svg>Parent Details</a>
                                <a href="forms_repository.html" class="nav-link"><svg xmlns="http://www.w3.org/2000/svg"
                                        width="40" height="40" fill="currentColor"
                                        class="bi bi-file-earmark-text-fill p-2" viewBox="0 0 16 16">
                                        <path
                                            d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM4.5 9a.5.5 0 0 1 0-1h7a.5.5 0 0 1 0 1h-7zM4 10.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 1 0-1h4a.5.5 0 0 1 0 1h-4z" />
                                    </svg>Classroom | Form Manage</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Side Menu Bar End -->
            <div class="col-8">
                <div class="text-center m-2">
                    <img src="image/gs_logo_lynnwood.png" alt="gs_logo_lynnwood" type="image/png" width="476px"
                        height="112px">
                </div>
            </div>
            <div class="col-2">
                <div id="btn-signout" class="btn signout"><i
                        class="fa-solid fa-arrow-right-from-bracket"></i>&nbsp;<b>Sign
                        Out</b></div>
            </div>
        </div>
    </nav><br>
    <!-- Navigation Bar End -->

    <!-- Alert Message -->

    <div class="success-msg alert alert-success">
        <a href="#" data-dismiss="alert"></a>
        <strong>Success!</strong> Email Sent Successfully!
    </div>
    <div class="error-msg alert alert-danger">
        <a href="#" data-dismiss="alert" aria-label="close"></a>
        <strong>Oops!</strong> Email sending failed!
    </div>
    <!-- Alert Message End-->

    <!-- Parent Dashboard -->
    <div class="container">
        <div class="card m-4">
            <!-- Child Name -->
            <h2 class="parent_dashboard_title h2 pt-4 text-center">Parent details for :<span
                    id="applicationStatusYear"></span>
                <span class="child-name fs-2" id="applicationStatusyear" name="applicationStatusyear"></span>
            </h2>
            <div class="ms-4">
                <a href="invite_parent.html" class="btn btn-primary text-white text-decoration-none">Invite Parent</a>
                <!-- <a href="add_child.html" class="btn btn-primary text-white text-decoration-none">Add Child</a> --> 
            </div>
            <div class="row">
                <div class="col-7"></div>
                <div class="col-4 mb-2">
                    <div class="d-flex dropdown-container1">
                        <label for="parent_Search" class="me-2 fw-bold fs-5">Status: </label>
                        <select name="parentSearch" class="allform form-control classroom-dropdown1" id="parentSearch">
                            <option value="">Select status</option>
                            <option value="Archive">Archive</option>
                            <option value="Active">Active</option>
                        </select>
                    </div>
                </div>
            </div>
            

            <div class="d-flex justify-content-center m-2">

                <div class="container" style="margin-top: 20px;">
                    <div class="table-wrapper">
                        <!-- Form Action Table -->
                        <table id="example" class="display nowrap mt-3" style="width:100%" rules="all">
                            <thead class="table-head">
                                <th>Parent Name </th>
                                <th>Parent Email</th>
                                <th>Date</th>
                                <th>Invite Status</th>
                                <th>Resend Invite</th>
                            </thead>
                            <tbody></tbody>
                        </table>
                        <!-- Form Action Table End -->
                    </div>
                    <button class="excelbuttn border-0" onclick="ExportToExcel('xlsx')"><img src="image/excel.png"
                            alt="image" style="height:25px;width:25px;"></button>
                </div>
            </div>

            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Child Basic Information</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div id="addChildDiv">
                                <!--Child basi info Form-->
                                <div id="child_basic_form"><br>
                                    <div class="card_center">
                                        <div>
                                            <!-- <h2 class="card_title">Child Basic Information</h2><br> -->
                                            <div class="success-form-msg-update alert alert-success">
                                                <a href="#" class="close" data-dismiss="alert" aria-label="close"></a>
                                                <strong>Success!</strong> Parent Status Updated!
                                            </div>
                                            <div class="error-msg alert alert-danger">
                                                <a href="#" class="close" data-dismiss="alert" aria-label="close"></a>
                                                <strong>Oops!</strong> You have to fill all the fields!
                                            </div>
                                            <div class="error-msg-notfound alert alert-danger">
                                                <a href="#" class="close" data-dismiss="alert" aria-label="close"></a>
                                                <strong>Oops!</strong> failed to submit admission form
                                            </div>
                                            <div class="container" id="avf_form">
                                                <form id="childBasicForm">
                                                    <div class="row">
                                                        <div class="col-sm m-3">
                                                            <div class="form-group">
                                                                <label for="child_first_name"
                                                                    class="form-label"><b>First Name
                                                                    </b></label><br>
                                                                <input name="child_first_name" type="text"
                                                                    maxlength="20" class="form-control wizard-required"
                                                                    id="child_first_name">
                                                                <div class="wizard-form-error"></div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm m-3">
                                                            <div class="form-group">
                                                                <label for="child_last_name" class="form-label"><b>Last
                                                                        Name
                                                                    </b></label><br>
                                                                <input name="child_last_name" type="text" maxlength="20"
                                                                    class="form-control wizard-required"
                                                                    id="child_last_name">
                                                                <div class="wizard-form-error"></div>
                                                            </div>
                                                        </div>
                                                        <!-- <div class="col-sm m-3">
                                                                <div class="form-group"> 
                                                                    <label for="dob" class="form-label"><b>Date of Birth</b></label>
                                                                    <input type="date" class="form-control wizard-required" id="dob"
                                                                        name="dob"/>
                                                                        <div class="wizard-form-error"></div>
                                                                </div>
                                                            </div> -->
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-sm m-3">
                                                            <div class="form-group">
                                                                <label class="col-form-label"><b>Class Room</b></label>
                                                                <select class="form-control" name="class_id"
                                                                    id="class_name"></select>
                                                                <i class="fa fa-chevron-down"></i>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm m-3">
                                                            <div class="form-group">
                                                                <label class="col-form-label"><b>Parent
                                                                        Email</b></label>
                                                                <input class="form-control" id="primary_parent_email" disabled>
                                                                <input type="hidden" name="parent_id"
                                                                    id="primary_parent_hidden">
                                                                <!-- <i class="fa fa-chevron-down"></i> -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group clearfix m-5">
                                                        <div class="text-center">
                                                            <button class="cancel-btn">Cancel</button>
                                                            <button class="add-btn" id="basic_child_button">Add</button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <!-- <button type="button" class="btn btn-secondary"
                             data-bs-dismiss="modal">Close</button>
                         <button type="button" class="btn btn-primary">Save changes</button> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <link href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css" rel="stylesheet">

    <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://www.datatables.net/rss.xml">
    <link rel="stylesheet" type="text/css"
        href="https://cdn.datatables.net/searchbuilder/1.3.2/css/searchBuilder.dataTables.min.css">
    <link rel="stylesheet" type="text/css"
        href="https://cdn.datatables.net/datetime/1.1.2/css/dataTables.dateTime.min.css">

    <script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script type="text/javascript" language="javascript"
        src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" language="javascript"
        src="https://cdn.datatables.net/datetime/1.1.2/js/dataTables.dateTime.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/xlsx@0.15.1/dist/xlsx.full.min.js"></script>

    <script>
        // let object = {
        //         "from": "noreply.goddard@gmail.com",
        //         "to": "noreply.goddard@gmail.com",
        //         "subject": "subject",
        //         "body": "You are invited",
        //         "attachmentName": "AttachmentForm",
        //         "attachmentKey": "attachment"
        //     }
        //     function emailSend(child_full_name,parent_name,parent_email) {
        //             console.log(child_full_name);
        //             console.log(parent_name);
        //             console.log(parent_email);
        //         try {
        //             const obj = {};
        //             obj.child_full_name = child_full_name;
        //             obj.parent_name = parent_name;
        //             obj.parent_email = parent_email;
        //             obj.from = "noreply.goddard@gmail.com";
        //             obj.to = parent_email;
        //             let randomID = Math.floor(Date.now() / 1000);
        //             obj.invite_id =randomID;
        //             obj.subject = 'Invite parents';
        //             let messageData = 'https://arjavatech.github.io/goddard-frontend-dev/signup.html';
        //             obj.body = `${messageData}?id=${randomID}`;
        //             obj.attachmentName ="AttachmentForm";
        //             obj.attachmentKey ="attachment";
        //             const json =JSON.stringify(obj);
        //             console.log(json);

        //             $.ajax({
        //                 url: "https://ijz2b76zn8.execute-api.ap-south-1.amazonaws.com/test/email/send",
        //                 type: "POST",
        //                 contentType: "application/json",
        //                 data: json,
        //                 success: function (response) {
        //                     alert("Email Sent Successfully");
        //                     window.location.reload();
        //                 },
        //                 error: function (xhr, status, error) {
        //                     console.log(xhr);
        //                     console.log(status);
        //                     console.log(error);
        //                     alert("Email sending failed")
        //                 }
        //             });
        //         } catch (error) {
        //             console.error('Error:', error);
        //         }
        //     }

        $(document).ready(function () {
            initializeDataTable();

            // function for create dropdown options
            function getStatusDropdown(selectedStatusName, parentId) {
                let dropdown = `<div class="dropdown-container"><select class="parent-dropdown" data-parent-id="${parentId}">`;
                    const Acselected = "Active" === selectedStatusName ? 'selected' : '';
                    const Axselected = "Archive" === selectedStatusName ? 'selected' : '';

                    dropdown += `<option value="Active" ${Acselected}>Active</option>
                                <option value="Archive" ${Axselected}>Archive</option>`;
                    dropdown += `</select></div>`;
                    return dropdown;
            }

             // Parent Filter

            $(document).on("change", "#parentSearch", function() {
                console.log(this.value);
                initializeDataTable(this.value);
            });

            // $('#myTable').DataTable();
            //for avoid datatable error popup messages//
            $.fn.dataTable.ext.errMode = 'none';

            function initializeDataTable(statusval) {
                if ($.fn.DataTable.isDataTable('#example')) {
                    $('#example').DataTable().destroy();
                }
                //datatable creating function//
                $('#example').DataTable({
                //for adding horizontal scrool bar
                scrollX: true,
                Info: false,
                //option is used to define the layout and elements that should be displayed around the table.
                dom: 'Qlfrtip',
                lengthChange: false,
                scrollCollapse: true,
                scrollY: '500px',
                //for waking up the aws lambda server
                ajax: {
                    url: 'https://ijz2b76zn8.execute-api.ap-south-1.amazonaws.com/test/parent_invite_status/getall',
                    dataSrc: function(json) {

                        if (!statusval) {
                            return json.Active || [];
                        } else if (statusval === "Archive") {
                            return json.Archive || [];
                        } else if (statusval === "Active") {
                            return json.Active || [];
                        } else {
                            return [];
                        }
                        
                    }
                },
                //it is used to define and configure the individual columns of the table.
                columns: [
                    {
                        data: 'parent_name',
                        render: function (data, type, full, meta) {
                            let url = `${window.location.origin}/goddard-frontend-dev/parent_dashboard.html?id=${full.invite_email}`;
                            return `<a href="${url}" class="text-primary">${full.parent_name}</a>`;
                        },
                    },
                    { data: 'invite_email' },
                    {
                        data: 'time_stamp',
                        render: function (data, type, full, meta) {
                            const timestamp = full.time_stamp;
                            // Split the timestamp into date and time
                            const [datePart, timePart] = timestamp.split(' ');
                            return datePart;
                        },
                    },
                    { data: 'status',
                        render: function (data, type, full, meta) {
                            return getStatusDropdown(full.status, full.parent_id);
                        },
                    },
                    {
                        data: 'resend',
                        render: function (data, type, full, meta) {
                            const disabled = full.invite_status === 'Active' ? 'disabled' : '';
                            // const linkstatus = full.status === 'Inactive' ? '#' : `add_child.html?email=${full.invite_email}`;
                            const linkstatuscolor = full.invite_status === 'Inactive' ? 'linkstatus' : '';
                            return `<button id="sendButton"  name="sendButton" class="invite-button ${disabled}" onclick="emailSend('${full.invite_email}')" ${disabled}>Send</button>
                            <button id="getEmailid" class="invite-button text-white ${linkstatuscolor}" data-bs-toggle="modal"
                            data-bs-target="#exampleModal" onclick="setModalValue('${full.invite_email}')">Add Child</button>`;

                        },
                    },
                ],
                "pageLength": 250,
            });
            }
        });

        function setModalValue(buttonValue) {
            //for waking up the aws lambda server
            $.ajax({
                url: 'https://ijz2b76zn8.execute-api.ap-south-1.amazonaws.com/test/parent_info/getall',
                type: 'get',
                datasrc: '',
                dataType: 'json',
                //this is uesd to get the response and return the result
                success: function (response) {
                    console.log(response);
                    var parent_email = '';
                    // Checking if response is not empty and contains valid data
                    if (response && response.length > 0) {
                        for (var i = 0; i < response.length; i++) {
                            if (response[i].parent_email) {
                                // let Selected = response[i].parent_email === buttonValue ? 'selected' : '';
                                // // Dynamically constructing options for the select
                                // parent_email += '<option value="' + response[i].parent_id + '" data-tokens="' + response[i].parent_id + '"' + Selected + '>' + response[i].parent_email + '</option>';
                                if (response[i].parent_email === buttonValue) {
                                    // Updating the select parent email
                                    $('#primary_parent_email').val(response[i].parent_email);
                                    $('#primary_parent_hidden').val(response[i].parent_id);
                                }
                            }
                        }
                    }

                }
            });
        }

       
        $(document).on("change", ".parent-dropdown", function(event) {
        event.preventDefault(); // Prevent default form submission
        let selectedParentName = $(this).val();
        let parentId = $(this).data('parent-id');

        // let obj = {
        //     "form_ids" : multi_form_name,
        //     "state": allocate_to
        // }
        
        // const json = JSON.stringify(obj);
        // let formId_len = obj.form_ids.length;
        // let form_allocate = obj.state;
        var msg = confirm("Are you sure?"); 
        //it check the user confirmation if yes or no       
        if (msg == true) { 

            if(parentId != ''){
            
                $.ajax({
                    url: `https://ijz2b76zn8.execute-api.ap-south-1.amazonaws.com/test/update_parent_status_as_archive/${parentId}`,
                    type: "PUT",
                    contentType: "application/json",
                    data: '',
                    success: function (response) {
                        console.log(response);
                        return false;
                        if (response.message === `Parent status with parent_id ${parentId} updated successfully`) {
                            $(".success-form-msg-update").show();
                            setTimeout(function () {
                                $(".success-form-msg-update").hide();
                                window.location.reload();
                            }, 3000);
                        } else {
                            $(".error-msg-notfound").show();
                            setTimeout(function () {
                                $(".error-msg-notfound").hide();
                            }, 3000);
                        }

                    },
                    error: function (xhr, status, error) {
                        console.log(error)
                        $(".error-msg-notfound").show();
                        setTimeout(function () {
                            $(".error-msg-notfound").hide();
                        }, 3000);
                    }
                });
            
            } else {
                $(".error-msg").show();
                setTimeout(function () {
                    $(".error-msg").hide();
                }, 3000);
                
            }

        } else {
                window.location.reload();
        }

    });

   

        function ExportToExcel(type, fn, dl) {
            var elt = document.getElementById('example');
            var wb = XLSX.utils.table_to_book(elt, { sheet: "sheet1" });
            var sheet = wb.Sheets["sheet1"]; // Access the first sheet of the workbook
            var rowIndex = 2; // Excel uses 1-based indexing

            $('#example').find('tbody tr').each(function () {
                // Now, remove the 5th column from the Excel sheet entirely
                for (var R = 1; R <= rowIndex; R++) {
                    var cellToDelete = 'E' + R; // Column E is the 5th column
                    if (sheet[cellToDelete]) {
                        delete sheet[cellToDelete]; // Remove the 5th column data
                    }
                }
                rowIndex++;
            });

            if (dl) {
                XLSX.write(wb, { bookType: type, bookSST: true, type: 'base64' });
            } else {
                XLSX.writeFile(wb, fn || ('Parent details.' + (type || 'xlsx')));
            }
        }
    </script>
</body>

</html>